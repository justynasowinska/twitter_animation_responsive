5558c0126a6bd2166e28f608177e5b6e
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var PixelRatio = require('PixelRatio');

var ReactNativeStyleAttributes = require('ReactNativeStyleAttributes');

var StyleSheetValidation = require('StyleSheetValidation');

var flatten = require('flattenStyle');

var hairlineWidth = PixelRatio.roundToNearestPixel(0.4);

if (hairlineWidth === 0) {
  hairlineWidth = 1 / PixelRatio.get();
}

var absoluteFill = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
};

if (__DEV__) {
  Object.freeze(absoluteFill);
}

module.exports = {
  hairlineWidth: hairlineWidth,
  absoluteFill: absoluteFill,
  absoluteFillObject: absoluteFill,
  compose: function compose(style1, style2) {
    if (style1 != null && style2 != null) {
      return [style1, style2];
    } else {
      return style1 != null ? style1 : style2;
    }
  },
  flatten: flatten,
  setStyleAttributePreprocessor: function setStyleAttributePreprocessor(property, process) {
    var value;

    if (ReactNativeStyleAttributes[property] === true) {
      value = {};
    } else if (typeof ReactNativeStyleAttributes[property] === 'object') {
      value = ReactNativeStyleAttributes[property];
    } else {
      console.error(property + " is not a valid style attribute");
      return;
    }

    if (__DEV__ && typeof value.process === 'function') {
      console.warn("Overwriting " + property + " style attribute preprocessor");
    }

    ReactNativeStyleAttributes[property] = (0, _objectSpread2.default)({}, value, {
      process: process
    });
  },
  create: function create(obj) {
    if (__DEV__) {
      for (var _key in obj) {
        StyleSheetValidation.validateStyle(_key, obj);

        if (obj[_key]) {
          Object.freeze(obj[_key]);
        }
      }
    }

    return obj;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0eWxlU2hlZXQuanMiXSwibmFtZXMiOlsiUGl4ZWxSYXRpbyIsInJlcXVpcmUiLCJSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyIsIlN0eWxlU2hlZXRWYWxpZGF0aW9uIiwiZmxhdHRlbiIsImhhaXJsaW5lV2lkdGgiLCJyb3VuZFRvTmVhcmVzdFBpeGVsIiwiZ2V0IiwiYWJzb2x1dGVGaWxsIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJfX0RFVl9fIiwiT2JqZWN0IiwiZnJlZXplIiwibW9kdWxlIiwiZXhwb3J0cyIsImFic29sdXRlRmlsbE9iamVjdCIsImNvbXBvc2UiLCJzdHlsZTEiLCJzdHlsZTIiLCJzZXRTdHlsZUF0dHJpYnV0ZVByZXByb2Nlc3NvciIsInByb3BlcnR5IiwicHJvY2VzcyIsInZhbHVlIiwiY29uc29sZSIsImVycm9yIiwid2FybiIsImNyZWF0ZSIsIm9iaiIsImtleSIsInZhbGlkYXRlU3R5bGUiXSwibWFwcGluZ3MiOiJBQVNBOzs7Ozs7QUFFQSxJQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQTFCOztBQUNBLElBQU1DLDBCQUEwQixHQUFHRCxPQUFPLENBQUMsNEJBQUQsQ0FBMUM7O0FBQ0EsSUFBTUUsb0JBQW9CLEdBQUdGLE9BQU8sQ0FBQyxzQkFBRCxDQUFwQzs7QUFFQSxJQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxjQUFELENBQXZCOztBQTBJQSxJQUFJSSxhQUFhLEdBQUdMLFVBQVUsQ0FBQ00sbUJBQVgsQ0FBK0IsR0FBL0IsQ0FBcEI7O0FBQ0EsSUFBSUQsYUFBYSxLQUFLLENBQXRCLEVBQXlCO0FBQ3ZCQSxFQUFBQSxhQUFhLEdBQUcsSUFBSUwsVUFBVSxDQUFDTyxHQUFYLEVBQXBCO0FBQ0Q7O0FBRUQsSUFBTUMsWUFBWSxHQUFHO0FBQ25CQyxFQUFBQSxRQUFRLEVBQUUsVUFEUztBQUVuQkMsRUFBQUEsSUFBSSxFQUFFLENBRmE7QUFHbkJDLEVBQUFBLEtBQUssRUFBRSxDQUhZO0FBSW5CQyxFQUFBQSxHQUFHLEVBQUUsQ0FKYztBQUtuQkMsRUFBQUEsTUFBTSxFQUFFO0FBTFcsQ0FBckI7O0FBT0EsSUFBSUMsT0FBSixFQUFhO0FBQ1hDLEVBQUFBLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjUixZQUFkO0FBQ0Q7O0FBOENEUyxNQUFNLENBQUNDLE9BQVAsR0FBaUI7QUFvQmZiLEVBQUFBLGFBQWEsRUFBYkEsYUFwQmU7QUEyQmZHLEVBQUFBLFlBQVksRUFBR0EsWUEzQkE7QUF5Q2ZXLEVBQUFBLGtCQUFrQixFQUFFWCxZQXpDTDtBQWlEZlksRUFBQUEsT0FqRGUsbUJBa0RiQyxNQWxEYSxFQW1EYkMsTUFuRGEsRUFvRFc7QUFDeEIsUUFBSUQsTUFBTSxJQUFJLElBQVYsSUFBa0JDLE1BQU0sSUFBSSxJQUFoQyxFQUFzQztBQUNwQyxhQUFRLENBQUNELE1BQUQsRUFBU0MsTUFBVCxDQUFSO0FBQ0QsS0FGRCxNQUVPO0FBQ0wsYUFBT0QsTUFBTSxJQUFJLElBQVYsR0FBaUJBLE1BQWpCLEdBQTBCQyxNQUFqQztBQUNEO0FBQ0YsR0ExRGM7QUFtR2ZsQixFQUFBQSxPQUFPLEVBQVBBLE9BbkdlO0FBOEdmbUIsRUFBQUEsNkJBOUdlLHlDQStHYkMsUUEvR2EsRUFnSGJDLE9BaEhhLEVBaUhiO0FBQ0EsUUFBSUMsS0FBSjs7QUFFQSxRQUFJeEIsMEJBQTBCLENBQUNzQixRQUFELENBQTFCLEtBQXlDLElBQTdDLEVBQW1EO0FBQ2pERSxNQUFBQSxLQUFLLEdBQUcsRUFBUjtBQUNELEtBRkQsTUFFTyxJQUFJLE9BQU94QiwwQkFBMEIsQ0FBQ3NCLFFBQUQsQ0FBakMsS0FBZ0QsUUFBcEQsRUFBOEQ7QUFDbkVFLE1BQUFBLEtBQUssR0FBR3hCLDBCQUEwQixDQUFDc0IsUUFBRCxDQUFsQztBQUNELEtBRk0sTUFFQTtBQUNMRyxNQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBaUJKLFFBQWpCO0FBQ0E7QUFDRDs7QUFFRCxRQUFJVixPQUFPLElBQUksT0FBT1ksS0FBSyxDQUFDRCxPQUFiLEtBQXlCLFVBQXhDLEVBQW9EO0FBQ2xERSxNQUFBQSxPQUFPLENBQUNFLElBQVIsa0JBQTRCTCxRQUE1QjtBQUNEOztBQUVEdEIsSUFBQUEsMEJBQTBCLENBQUNzQixRQUFELENBQTFCLG1DQUEyQ0UsS0FBM0M7QUFBa0RELE1BQUFBLE9BQU8sRUFBUEE7QUFBbEQ7QUFDRCxHQWxJYztBQXVJZkssRUFBQUEsTUF2SWUsa0JBdUlpQkMsR0F2SWpCLEVBdUlzRDtBQUluRSxRQUFJakIsT0FBSixFQUFhO0FBQ1gsV0FBSyxJQUFNa0IsSUFBWCxJQUFrQkQsR0FBbEIsRUFBdUI7QUFDckI1QixRQUFBQSxvQkFBb0IsQ0FBQzhCLGFBQXJCLENBQW1DRCxJQUFuQyxFQUF3Q0QsR0FBeEM7O0FBQ0EsWUFBSUEsR0FBRyxDQUFDQyxJQUFELENBQVAsRUFBYztBQUNaakIsVUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNlLEdBQUcsQ0FBQ0MsSUFBRCxDQUFqQjtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxXQUFPRCxHQUFQO0FBQ0Q7QUFwSmMsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgUGl4ZWxSYXRpbyA9IHJlcXVpcmUoJ1BpeGVsUmF0aW8nKTtcbmNvbnN0IFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzID0gcmVxdWlyZSgnUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXMnKTtcbmNvbnN0IFN0eWxlU2hlZXRWYWxpZGF0aW9uID0gcmVxdWlyZSgnU3R5bGVTaGVldFZhbGlkYXRpb24nKTtcblxuY29uc3QgZmxhdHRlbiA9IHJlcXVpcmUoJ2ZsYXR0ZW5TdHlsZScpO1xuXG5pbXBvcnQgdHlwZSB7XG4gIF9fX19TdHlsZXNfSW50ZXJuYWwsXG4gIF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsLFxuICBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19WaWV3U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19WaWV3U3R5bGVQcm9wX0ludGVybmFsLFxuICBfX19fVGV4dFN0eWxlX0ludGVybmFsLFxuICBfX19fVGV4dFN0eWxlUHJvcF9JbnRlcm5hbCxcbiAgX19fX0ltYWdlU3R5bGVfSW50ZXJuYWwsXG4gIF9fX19JbWFnZVN0eWxlUHJvcF9JbnRlcm5hbCxcbn0gZnJvbSAnU3R5bGVTaGVldFR5cGVzJztcblxuLyoqXG4gKiBUaGlzIHR5cGUgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIHR5cGUgZm9yIGEgcHJvcCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoXG4gKiB0byBhIDxWaWV3PidzIGBzdHlsZWAgcHJvcC4gVGhpcyBlbnN1cmVzIGNhbGwgc2l0ZXMgb2YgdGhlIGNvbXBvbmVudFxuICogY2FuJ3QgcGFzcyBzdHlsZXMgdGhhdCBWaWV3IGRvZXNuJ3Qgc3VwcG9ydCBzdWNoIGFzIGBmb250U2l6ZWAuYFxuICpcbiAqIHR5cGUgUHJvcHMgPSB7c3R5bGU6IFZpZXdTdHlsZVByb3B9XG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IChwcm9wczogUHJvcHMpID0+IDxWaWV3IHN0eWxlPXtwcm9wcy5zdHlsZX0gLz5cbiAqL1xuZXhwb3J0IHR5cGUgVmlld1N0eWxlUHJvcCA9IF9fX19WaWV3U3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYSBwcm9wIHRoYXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHRvIGEgPFRleHQ+J3MgYHN0eWxlYCBwcm9wLiBUaGlzIGVuc3VyZXMgY2FsbCBzaXRlcyBvZiB0aGUgY29tcG9uZW50XG4gKiBjYW4ndCBwYXNzIHN0eWxlcyB0aGF0IFRleHQgZG9lc24ndCBzdXBwb3J0IHN1Y2ggYXMgYHJlc2l6ZU1vZGVgLmBcbiAqXG4gKiB0eXBlIFByb3BzID0ge3N0eWxlOiBUZXh0U3R5bGVQcm9wfVxuICogY29uc3QgTXlDb21wb25lbnQgPSAocHJvcHM6IFByb3BzKSA9PiA8VGV4dCBzdHlsZT17cHJvcHMuc3R5bGV9IC8+XG4gKi9cbmV4cG9ydCB0eXBlIFRleHRTdHlsZVByb3AgPSBfX19fVGV4dFN0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgc2hvdWxkIGJlIHVzZWQgYXMgdGhlIHR5cGUgZm9yIGEgcHJvcCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoXG4gKiB0byBhbiA8SW1hZ2U+J3MgYHN0eWxlYCBwcm9wLiBUaGlzIGVuc3VyZXMgY2FsbCBzaXRlcyBvZiB0aGUgY29tcG9uZW50XG4gKiBjYW4ndCBwYXNzIHN0eWxlcyB0aGF0IEltYWdlIGRvZXNuJ3Qgc3VwcG9ydCBzdWNoIGFzIGBmb250U2l6ZWAuYFxuICpcbiAqIHR5cGUgUHJvcHMgPSB7c3R5bGU6IEltYWdlU3R5bGVQcm9wfVxuICogY29uc3QgTXlDb21wb25lbnQgPSAocHJvcHM6IFByb3BzKSA9PiA8SW1hZ2Ugc3R5bGU9e3Byb3BzLnN0eWxlfSAvPlxuICovXG5leHBvcnQgdHlwZSBJbWFnZVN0eWxlUHJvcCA9IF9fX19JbWFnZVN0eWxlUHJvcF9JbnRlcm5hbDtcblxuLyoqXG4gKiBXQVJOSU5HOiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHVzaW5nIHRoaXMgdHlwZS4gVGhpcyB0eXBlXG4gKiBpcyBzaW1pbGFyIHRvIHRoZSBvbmVzIGFib3ZlIGV4Y2VwdCBpdCBhbGxvd3Mgc3R5bGVzIHRoYXQgYXJlIGFjY2VwdGVkXG4gKiBieSBhbGwgb2YgVmlldywgVGV4dCwgb3IgSW1hZ2UuIEl0IGlzIHRoZXJlZm9yZSB2ZXJ5IHVuc2FmZSB0byBwYXNzIHRoaXNcbiAqIHRocm91Z2ggdG8gYW4gdW5kZXJseWluZyBjb21wb25lbnQuIFVzaW5nIHRoaXMgaXMgYWxtb3N0IGFsd2F5cyBhIG1pc3Rha2VcbiAqIGFuZCB1c2luZyBvbmUgb2YgdGhlIG90aGVyIG1vcmUgcmVzdHJpY3RpdmUgdHlwZXMgaXMgbGlrZWx5IHRoZSByaWdodCBjaG9pY2UuXG4gKi9cbmV4cG9ydCB0eXBlIERhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVQcm9wID0gX19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFV0aWxpdHkgdHlwZSBmb3IgZ2V0dGluZyB0aGUgdmFsdWVzIGZvciBzcGVjaWZpYyBzdHlsZSBrZXlzLlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgaXMgYmFkIGJlY2F1c2UgcG9zaXRpb24gaXMgbW9yZSByZXN0cmljdGl2ZSB0aGFuICdzdHJpbmcnOlxuICogYGBgXG4gKiB0eXBlIFByb3BzID0ge3Bvc2l0aW9uOiBzdHJpbmd9O1xuICogYGBgXG4gKlxuICogWW91IHNob3VsZCB1c2UgdGhlIGZvbGxvd2luZyBpbnN0ZWFkOlxuICpcbiAqIGBgYFxuICogdHlwZSBQcm9wcyA9IHtwb3NpdGlvbjogVHlwZUZvclN0eWxlS2V5PCdwb3NpdGlvbic+fTtcbiAqIGBgYFxuICpcbiAqIFRoaXMgd2lsbCBjb3JyZWN0bHkgZ2l2ZSB5b3UgdGhlIHR5cGUgJ2Fic29sdXRlJyB8ICdyZWxhdGl2ZSdcbiAqL1xuZXhwb3J0IHR5cGUgVHlwZUZvclN0eWxlS2V5PFxuICAra2V5OiAkS2V5czxfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZV9JbnRlcm5hbD4sXG4+ID0gJEVsZW1lbnRUeXBlPF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsLCBrZXk+O1xuXG4vKipcbiAqIFRoaXMgdHlwZSBpcyBhbiBvYmplY3Qgb2YgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSBzdHlsZVxuICogcHJvcGVydGllcyB0aGF0IGNhbiBiZSBzcGVjaWZpZWQgZm9yIFZpZXcuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgaXNuJ3QgYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXNcbiAqIHJlc3VsdHMgZnJvbSBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90XG4gKiBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbixcbiAqIGNvbnNpZGVyIHVzaW5nIFZpZXdTdHlsZVByb3AuXG4gKlxuICogQSByZWFzb25hYmxlIHVzYWdlIG9mIHRoaXMgdHlwZSBpcyBmb3IgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhblxuICogb2JqZWN0IG9mIHN0eWxlcyB0byBwYXNzIHRvIGEgVmlldyB0aGF0IGNhbid0IGJlIHByZWNvbXB1dGVkIHdpdGhcbiAqIFN0eWxlU2hlZXQuY3JlYXRlLlxuICovXG5leHBvcnQgdHlwZSBWaWV3U3R5bGUgPSBfX19fVmlld1N0eWxlX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBpcyBhbiBvYmplY3Qgb2YgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSBzdHlsZVxuICogcHJvcGVydGllcyB0aGF0IGNhbiBiZSBzcGVjaWZpZWQgZm9yIFRleHQuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgaXNuJ3QgYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXNcbiAqIHJlc3VsdHMgZnJvbSBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90XG4gKiBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbixcbiAqIGNvbnNpZGVyIHVzaW5nIFRleHRTdHlsZVByb3AuXG4gKlxuICogQSByZWFzb25hYmxlIHVzYWdlIG9mIHRoaXMgdHlwZSBpcyBmb3IgaGVscGVyIGZ1bmN0aW9ucyB0aGF0IHJldHVybiBhblxuICogb2JqZWN0IG9mIHN0eWxlcyB0byBwYXNzIHRvIGEgVGV4dCB0aGF0IGNhbid0IGJlIHByZWNvbXB1dGVkIHdpdGhcbiAqIFN0eWxlU2hlZXQuY3JlYXRlLlxuICovXG5leHBvcnQgdHlwZSBUZXh0U3R5bGUgPSBfX19fVGV4dFN0eWxlX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBpcyBhbiBvYmplY3Qgb2YgdGhlIGRpZmZlcmVudCBwb3NzaWJsZSBzdHlsZVxuICogcHJvcGVydGllcyB0aGF0IGNhbiBiZSBzcGVjaWZpZWQgZm9yIEltYWdlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGlzbid0IGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzXG4gKiByZXN1bHRzIGZyb20gU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdFxuICogYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sXG4gKiBjb25zaWRlciB1c2luZyBJbWFnZVN0eWxlUHJvcC5cbiAqXG4gKiBBIHJlYXNvbmFibGUgdXNhZ2Ugb2YgdGhpcyB0eXBlIGlzIGZvciBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFuXG4gKiBvYmplY3Qgb2Ygc3R5bGVzIHRvIHBhc3MgdG8gYW4gSW1hZ2UgdGhhdCBjYW4ndCBiZSBwcmVjb21wdXRlZCB3aXRoXG4gKiBTdHlsZVNoZWV0LmNyZWF0ZS5cbiAqL1xuZXhwb3J0IHR5cGUgSW1hZ2VTdHlsZSA9IF9fX19JbWFnZVN0eWxlX0ludGVybmFsO1xuXG4vKipcbiAqIFdBUk5JTkc6IFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdXNpbmcgdGhpcyB0eXBlLiBUaGlzIHR5cGUgaXMgYW4gb2JqZWN0XG4gKiB3aXRoIGFsbCBwb3NzaWJsZSBzdHlsZSBrZXlzIGFuZCB0aGVpciB2YWx1ZXMuIE5vdGUgdGhhdCB0aGlzIGlzbid0XG4gKiBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhcyByZXN1bHRzIGZyb21cbiAqIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3QgYW4gb2JqZWN0IG9mIHN0eWxlcy5cbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB0eXBlIHRoZSBzdHlsZSBwcm9wIG9mIGEgZnVuY3Rpb24sIGNvbnNpZGVyIHVzaW5nXG4gKiBWaWV3U3R5bGVQcm9wLCBUZXh0U3R5bGVQcm9wLCBvciBJbWFnZVN0eWxlUHJvcC5cbiAqXG4gKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgYnkgdmVyeSBjb3JlIHV0aWxpdGllcyB0aGF0IG9wZXJhdGUgb24gYW4gb2JqZWN0XG4gKiBjb250YWluaW5nIGFueSBwb3NzaWJsZSBzdHlsZSB2YWx1ZS5cbiAqL1xuZXhwb3J0IHR5cGUgRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZSA9IF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsO1xuXG5sZXQgaGFpcmxpbmVXaWR0aCA9IFBpeGVsUmF0aW8ucm91bmRUb05lYXJlc3RQaXhlbCgwLjQpO1xuaWYgKGhhaXJsaW5lV2lkdGggPT09IDApIHtcbiAgaGFpcmxpbmVXaWR0aCA9IDEgLyBQaXhlbFJhdGlvLmdldCgpO1xufVxuXG5jb25zdCBhYnNvbHV0ZUZpbGwgPSB7XG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICBsZWZ0OiAwLFxuICByaWdodDogMCxcbiAgdG9wOiAwLFxuICBib3R0b206IDAsXG59O1xuaWYgKF9fREVWX18pIHtcbiAgT2JqZWN0LmZyZWV6ZShhYnNvbHV0ZUZpbGwpO1xufVxuXG4vKipcbiAqIEEgU3R5bGVTaGVldCBpcyBhbiBhYnN0cmFjdGlvbiBzaW1pbGFyIHRvIENTUyBTdHlsZVNoZWV0c1xuICpcbiAqIENyZWF0ZSBhIG5ldyBTdHlsZVNoZWV0OlxuICpcbiAqIGBgYFxuICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICogICBjb250YWluZXI6IHtcbiAqICAgICBib3JkZXJSYWRpdXM6IDQsXG4gKiAgICAgYm9yZGVyV2lkdGg6IDAuNSxcbiAqICAgICBib3JkZXJDb2xvcjogJyNkNmQ3ZGEnLFxuICogICB9LFxuICogICB0aXRsZToge1xuICogICAgIGZvbnRTaXplOiAxOSxcbiAqICAgICBmb250V2VpZ2h0OiAnYm9sZCcsXG4gKiAgIH0sXG4gKiAgIGFjdGl2ZVRpdGxlOiB7XG4gKiAgICAgY29sb3I6ICdyZWQnLFxuICogICB9LFxuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBVc2UgYSBTdHlsZVNoZWV0OlxuICpcbiAqIGBgYFxuICogPFZpZXcgc3R5bGU9e3N0eWxlcy5jb250YWluZXJ9PlxuICogICA8VGV4dCBzdHlsZT17W3N0eWxlcy50aXRsZSwgdGhpcy5wcm9wcy5pc0FjdGl2ZSAmJiBzdHlsZXMuYWN0aXZlVGl0bGVdfSAvPlxuICogPC9WaWV3PlxuICogYGBgXG4gKlxuICogQ29kZSBxdWFsaXR5OlxuICpcbiAqICAtIEJ5IG1vdmluZyBzdHlsZXMgYXdheSBmcm9tIHRoZSByZW5kZXIgZnVuY3Rpb24sIHlvdSdyZSBtYWtpbmcgdGhlIGNvZGVcbiAqICBlYXNpZXIgdG8gdW5kZXJzdGFuZC5cbiAqICAtIE5hbWluZyB0aGUgc3R5bGVzIGlzIGEgZ29vZCB3YXkgdG8gYWRkIG1lYW5pbmcgdG8gdGhlIGxvdyBsZXZlbCBjb21wb25lbnRzXG4gKiAgaW4gdGhlIHJlbmRlciBmdW5jdGlvbi5cbiAqXG4gKiBQZXJmb3JtYW5jZTpcbiAqXG4gKiAgLSBNYWtpbmcgYSBzdHlsZXNoZWV0IGZyb20gYSBzdHlsZSBvYmplY3QgbWFrZXMgaXQgcG9zc2libGUgdG8gcmVmZXIgdG8gaXRcbiAqIGJ5IElEIGluc3RlYWQgb2YgY3JlYXRpbmcgYSBuZXcgc3R5bGUgb2JqZWN0IGV2ZXJ5IHRpbWUuXG4gKiAgLSBJdCBhbHNvIGFsbG93cyB0byBzZW5kIHRoZSBzdHlsZSBvbmx5IG9uY2UgdGhyb3VnaCB0aGUgYnJpZGdlLiBBbGxcbiAqIHN1YnNlcXVlbnQgdXNlcyBhcmUgZ29pbmcgdG8gcmVmZXIgYW4gaWQgKG5vdCBpbXBsZW1lbnRlZCB5ZXQpLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgLyoqXG4gICAqIFRoaXMgaXMgZGVmaW5lZCBhcyB0aGUgd2lkdGggb2YgYSB0aGluIGxpbmUgb24gdGhlIHBsYXRmb3JtLiBJdCBjYW4gYmVcbiAgICogdXNlZCBhcyB0aGUgdGhpY2tuZXNzIG9mIGEgYm9yZGVyIG9yIGRpdmlzaW9uIGJldHdlZW4gdHdvIGVsZW1lbnRzLlxuICAgKiBFeGFtcGxlOlxuICAgKiBgYGBcbiAgICogICB7XG4gICAqICAgICBib3JkZXJCb3R0b21Db2xvcjogJyNiYmInLFxuICAgKiAgICAgYm9yZGVyQm90dG9tV2lkdGg6IFN0eWxlU2hlZXQuaGFpcmxpbmVXaWR0aFxuICAgKiAgIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoaXMgY29uc3RhbnQgd2lsbCBhbHdheXMgYmUgYSByb3VuZCBudW1iZXIgb2YgcGl4ZWxzIChzbyBhIGxpbmUgZGVmaW5lZFxuICAgKiBieSBpdCBsb29rIGNyaXNwKSBhbmQgd2lsbCB0cnkgdG8gbWF0Y2ggdGhlIHN0YW5kYXJkIHdpZHRoIG9mIGEgdGhpbiBsaW5lXG4gICAqIG9uIHRoZSB1bmRlcmx5aW5nIHBsYXRmb3JtLiBIb3dldmVyLCB5b3Ugc2hvdWxkIG5vdCByZWx5IG9uIGl0IGJlaW5nIGFcbiAgICogY29uc3RhbnQgc2l6ZSwgYmVjYXVzZSBvbiBkaWZmZXJlbnQgcGxhdGZvcm1zIGFuZCBzY3JlZW4gZGVuc2l0aWVzIGl0c1xuICAgKiB2YWx1ZSBtYXkgYmUgY2FsY3VsYXRlZCBkaWZmZXJlbnRseS5cbiAgICpcbiAgICogQSBsaW5lIHdpdGggaGFpcmxpbmUgd2lkdGggbWF5IG5vdCBiZSB2aXNpYmxlIGlmIHlvdXIgc2ltdWxhdG9yIGlzIGRvd25zY2FsZWQuXG4gICAqL1xuICBoYWlybGluZVdpZHRoLFxuXG4gIC8qKlxuICAgKiBBIHZlcnkgY29tbW9uIHBhdHRlcm4gaXMgdG8gY3JlYXRlIG92ZXJsYXlzIHdpdGggcG9zaXRpb24gYWJzb2x1dGUgYW5kIHplcm8gcG9zaXRpb25pbmcsXG4gICAqIHNvIGBhYnNvbHV0ZUZpbGxgIGNhbiBiZSB1c2VkIGZvciBjb252ZW5pZW5jZSBhbmQgdG8gcmVkdWNlIGR1cGxpY2F0aW9uIG9mIHRoZXNlIHJlcGVhdGVkXG4gICAqIHN0eWxlcy5cbiAgICovXG4gIGFic29sdXRlRmlsbDogKGFic29sdXRlRmlsbDogYW55KSwgLy8gVE9ETzogVGhpcyBzaG91bGQgYmUgdXBkYXRlZCBhZnRlciB3ZSBmaXggZG93bnN0cmVhbSBGbG93IHNpdGVzLlxuXG4gIC8qKlxuICAgKiBTb21ldGltZXMgeW91IG1heSB3YW50IGBhYnNvbHV0ZUZpbGxgIGJ1dCB3aXRoIGEgY291cGxlIHR3ZWFrcyAtIGBhYnNvbHV0ZUZpbGxPYmplY3RgIGNhbiBiZVxuICAgKiB1c2VkIHRvIGNyZWF0ZSBhIGN1c3RvbWl6ZWQgZW50cnkgaW4gYSBgU3R5bGVTaGVldGAsIGUuZy46XG4gICAqXG4gICAqICAgY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICAgKiAgICAgd3JhcHBlcjoge1xuICAgKiAgICAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdCxcbiAgICogICAgICAgdG9wOiAxMCxcbiAgICogICAgICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxuICAgKiAgICAgfSxcbiAgICogICB9KTtcbiAgICovXG4gIGFic29sdXRlRmlsbE9iamVjdDogYWJzb2x1dGVGaWxsLFxuXG4gIC8qKlxuICAgKiBDb21iaW5lcyB0d28gc3R5bGVzIHN1Y2ggdGhhdCBgc3R5bGUyYCB3aWxsIG92ZXJyaWRlIGFueSBzdHlsZXMgaW4gYHN0eWxlMWAuXG4gICAqIElmIGVpdGhlciBzdHlsZSBpcyBmYWxzeSwgdGhlIG90aGVyIG9uZSBpcyByZXR1cm5lZCB3aXRob3V0IGFsbG9jYXRpbmcgYW5cbiAgICogYXJyYXksIHNhdmluZyBhbGxvY2F0aW9ucyBhbmQgbWFpbnRhaW5pbmcgcmVmZXJlbmNlIGVxdWFsaXR5IGZvclxuICAgKiBQdXJlQ29tcG9uZW50IGNoZWNrcy5cbiAgICovXG4gIGNvbXBvc2U8VDogRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3A+KFxuICAgIHN0eWxlMTogP1QsXG4gICAgc3R5bGUyOiA/VCxcbiAgKTogP1QgfCAkUmVhZE9ubHlBcnJheTxUPiB7XG4gICAgaWYgKHN0eWxlMSAhPSBudWxsICYmIHN0eWxlMiAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gKFtzdHlsZTEsIHN0eWxlMl06ICRSZWFkT25seUFycmF5PFQ+KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0eWxlMSAhPSBudWxsID8gc3R5bGUxIDogc3R5bGUyO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRmxhdHRlbnMgYW4gYXJyYXkgb2Ygc3R5bGUgb2JqZWN0cywgaW50byBvbmUgYWdncmVnYXRlZCBzdHlsZSBvYmplY3QuXG4gICAqIEFsdGVybmF0aXZlbHksIHRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIHRvIGxvb2t1cCBJRHMsIHJldHVybmVkIGJ5XG4gICAqIFN0eWxlU2hlZXQucmVnaXN0ZXIuXG4gICAqXG4gICAqID4gKipOT1RFKio6IEV4ZXJjaXNlIGNhdXRpb24gYXMgYWJ1c2luZyB0aGlzIGNhbiB0YXggeW91IGluIHRlcm1zIG9mXG4gICAqID4gb3B0aW1pemF0aW9ucy5cbiAgICogPlxuICAgKiA+IElEcyBlbmFibGUgb3B0aW1pemF0aW9ucyB0aHJvdWdoIHRoZSBicmlkZ2UgYW5kIG1lbW9yeSBpbiBnZW5lcmFsLiBSZWZlcmluZ1xuICAgKiA+IHRvIHN0eWxlIG9iamVjdHMgZGlyZWN0bHkgd2lsbCBkZXByaXZlIHlvdSBvZiB0aGVzZSBvcHRpbWl6YXRpb25zLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKiBgYGBcbiAgICogY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICAgKiAgIGxpc3RJdGVtOiB7XG4gICAqICAgICBmbGV4OiAxLFxuICAgKiAgICAgZm9udFNpemU6IDE2LFxuICAgKiAgICAgY29sb3I6ICd3aGl0ZSdcbiAgICogICB9LFxuICAgKiAgIHNlbGVjdGVkTGlzdEl0ZW06IHtcbiAgICogICAgIGNvbG9yOiAnZ3JlZW4nXG4gICAqICAgfVxuICAgKiB9KTtcbiAgICpcbiAgICogU3R5bGVTaGVldC5mbGF0dGVuKFtzdHlsZXMubGlzdEl0ZW0sIHN0eWxlcy5zZWxlY3RlZExpc3RJdGVtXSlcbiAgICogLy8gcmV0dXJucyB7IGZsZXg6IDEsIGZvbnRTaXplOiAxNiwgY29sb3I6ICdncmVlbicgfVxuICAgKiBgYGBcbiAgICogQWx0ZXJuYXRpdmUgdXNlOlxuICAgKiBgYGBcbiAgICogU3R5bGVTaGVldC5mbGF0dGVuKHN0eWxlcy5saXN0SXRlbSk7XG4gICAqIC8vIHJldHVybiB7IGZsZXg6IDEsIGZvbnRTaXplOiAxNiwgY29sb3I6ICd3aGl0ZScgfVxuICAgKiAvLyBTaW1wbHkgc3R5bGVzLmxpc3RJdGVtIHdvdWxkIHJldHVybiBpdHMgSUQgKG51bWJlcilcbiAgICogYGBgXG4gICAqIFRoaXMgbWV0aG9kIGludGVybmFsbHkgdXNlcyBgU3R5bGVTaGVldFJlZ2lzdHJ5LmdldFN0eWxlQnlJRChzdHlsZSlgXG4gICAqIHRvIHJlc29sdmUgc3R5bGUgb2JqZWN0cyByZXByZXNlbnRlZCBieSBJRHMuIFRodXMsIGFuIGFycmF5IG9mIHN0eWxlXG4gICAqIG9iamVjdHMgKGluc3RhbmNlcyBvZiBTdHlsZVNoZWV0LmNyZWF0ZSksIGFyZSBpbmRpdmlkdWFsbHkgcmVzb2x2ZWQgdG8sXG4gICAqIHRoZWlyIHJlc3BlY3RpdmUgb2JqZWN0cywgbWVyZ2VkIGFzIG9uZSBhbmQgdGhlbiByZXR1cm5lZC4gVGhpcyBhbHNvIGV4cGxhaW5zXG4gICAqIHRoZSBhbHRlcm5hdGl2ZSB1c2UuXG4gICAqL1xuICBmbGF0dGVuLFxuXG4gIC8qKlxuICAgKiBXQVJOSU5HOiBFWFBFUklNRU5UQUwuIEJyZWFraW5nIGNoYW5nZXMgd2lsbCBwcm9iYWJseSBoYXBwZW4gYSBsb3QgYW5kIHdpbGxcbiAgICogbm90IGJlIHJlbGlhYmx5IGFubm91bmNlZC4gVGhlIHdob2xlIHRoaW5nIG1pZ2h0IGJlIGRlbGV0ZWQsIHdobyBrbm93cz8gVXNlXG4gICAqIGF0IHlvdXIgb3duIHJpc2suXG4gICAqXG4gICAqIFNldHMgYSBmdW5jdGlvbiB0byB1c2UgdG8gcHJlLXByb2Nlc3MgYSBzdHlsZSBwcm9wZXJ0eSB2YWx1ZS4gVGhpcyBpcyB1c2VkXG4gICAqIGludGVybmFsbHkgdG8gcHJvY2VzcyBjb2xvciBhbmQgdHJhbnNmb3JtIHZhbHVlcy4gWW91IHNob3VsZCBub3QgdXNlIHRoaXNcbiAgICogdW5sZXNzIHlvdSByZWFsbHkga25vdyB3aGF0IHlvdSBhcmUgZG9pbmcgYW5kIGhhdmUgZXhoYXVzdGVkIG90aGVyIG9wdGlvbnMuXG4gICAqL1xuICBzZXRTdHlsZUF0dHJpYnV0ZVByZXByb2Nlc3NvcihcbiAgICBwcm9wZXJ0eTogc3RyaW5nLFxuICAgIHByb2Nlc3M6IChuZXh0UHJvcDogbWl4ZWQpID0+IG1peGVkLFxuICApIHtcbiAgICBsZXQgdmFsdWU7XG5cbiAgICBpZiAoUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldID09PSB0cnVlKSB7XG4gICAgICB2YWx1ZSA9IHt9O1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhbHVlID0gUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGAke3Byb3BlcnR5fSBpcyBub3QgYSB2YWxpZCBzdHlsZSBhdHRyaWJ1dGVgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoX19ERVZfXyAmJiB0eXBlb2YgdmFsdWUucHJvY2VzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29uc29sZS53YXJuKGBPdmVyd3JpdGluZyAke3Byb3BlcnR5fSBzdHlsZSBhdHRyaWJ1dGUgcHJlcHJvY2Vzc29yYCk7XG4gICAgfVxuXG4gICAgUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldID0gey4uLnZhbHVlLCBwcm9jZXNzfTtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFN0eWxlU2hlZXQgc3R5bGUgcmVmZXJlbmNlIGZyb20gdGhlIGdpdmVuIG9iamVjdC5cbiAgICovXG4gIGNyZWF0ZTwrUzogX19fX1N0eWxlc19JbnRlcm5hbD4ob2JqOiBTKTogJE9iak1hcDxTLCAoT2JqZWN0KSA9PiBhbnk+IHtcbiAgICAvLyBUT0RPOiBUaGlzIHNob3VsZCByZXR1cm4gUyBhcyB0aGUgcmV0dXJuIHR5cGUuIEJ1dCBmaXJzdCxcbiAgICAvLyB3ZSBuZWVkIHRvIGNvZGVtb2QgYWxsIHRoZSBjYWxsc2l0ZXMgdGhhdCBhcmUgdHlwaW5nIHRoaXNcbiAgICAvLyByZXR1cm4gdmFsdWUgYXMgYSBudW1iZXIgKGV2ZW4gdGhvdWdoIGl0IHdhcyBvcGFxdWUpLlxuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICAgICAgU3R5bGVTaGVldFZhbGlkYXRpb24udmFsaWRhdGVTdHlsZShrZXksIG9iaik7XG4gICAgICAgIGlmIChvYmpba2V5XSkge1xuICAgICAgICAgIE9iamVjdC5mcmVlemUob2JqW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH0sXG59O1xuIl19